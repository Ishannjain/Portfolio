{% extends "me/layout.html" %}
{% load static %}

{% block body %}
<style>
  /* Scroll container */
  #projectss-row {
    display: flex;
    overflow: hidden;
    position: relative;
    width: 100%;
  }

  .scroll-content {
    display: flex;
    flex-wrap: nowrap;
    gap: 1rem;
    animation: scroll-left 30s linear infinite;
  }

  #projectss-row:hover .scroll-content {
    animation-play-state: paused;
  }

  @keyframes scroll-left {
    0% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  /* Hide native scrollbars */
  #projectss-row::-webkit-scrollbar {
    display: none;
  }

  #projectss-row {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .card-hover {
    transition: transform 0.3s ease;
    flex: 0 0 auto;
    width: 300px;
  }

  .card-hover:hover {
    transform: scale(1.05);
  }

  .card-img-top {
    height: 200px;
    object-fit: cover;
  }

  @media (max-width: 768px) {
    .card-img-top {
      height: 150px;
    }
  }
</style>

<div class="skills-certificates-container">
  <div class="skills-row">

    <!-- My Skills -->
    <div class="skills-section">
      <h3>My Skills</h3>
      {% for skill in skills %}
        <div class="skill-item">
          <div class="skill-header">
            <h2 class="skill-name">{{ skill.name }}</h2>
            <span class="skill-level">{{ skill.level }}%</span>
          </div>
          <div class="progress">
            <div class="progress-bar" style="width: {{ skill.level }}%;"></div>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Professional Skills -->
    <div class="skills-section">
      <h3>Professional Skills</h3>
      {% for skill in proskills %}
        <div class="skill-item">
          <div class="skill-header">
            <h2 class="skill-name">{{ skill.name }}</h2>
            <span class="skill-level">{{ skill.level }}%</span>
          </div>
          <div class="progress">
            <div class="progress-bar" style="width: {{ skill.level }}%;"></div>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Certificates -->
    <div class="skills-section certificates-section">
      <h3>Certificates</h3>
      <div class="cert-grid" id="certss">
        {% for cer in Certificatess %}
          <div class="cert-card">
            <img src="{{ cer.img }}" class="cert-img" alt="{{ cer.name }}">
            <div class="cert-body">
              <h5>{{ cer.name }}</h5>
              <p>{{ cer.note }}</p>
              <a class="nav-link" href="{% url 'cert_detail' cer.id %}">More Detailed</a>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

  </div>
</div>

<!-- Projects Section -->
<h1 class="mt-5 mb-4 text-center">My Projects</h1>

<!-- Grouped Project Categories (3 or more projects) -->
{% for item in grouped_skills %}
  <div class="skills-section mt-5">
    <h3 class="mt-4">{{ item.skill.name }}</h3>
    <div class="mt-3" id="projectss-row">
      <div class="scroll-content">
        {% for project in item.projects %}
          <div class="card bg-dark text-white h-100 card-hover">
            <img src="{{ project.image_url }}" class="card-img-top border-bottom" alt="{{ project.title }}">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ project.title }}</h5>
              <p class="card-text">Tech_stack: {{ project.tech_stack }}</p>
              <a href="{{ project.visit_link }}" target="_blank" class="btn btn-outline-light mt-auto">Visit Project</a>
              <a class="nav-link" href="{% url 'project_detail' project.id %}">More Detailed</a>
            </div>
          </div>
        {% endfor %}

        <!-- Duplicate for seamless scroll -->
        {% for project in item.projects %}
          <div class="card bg-dark text-white h-100 card-hover">
            <img src="{{ project.image_url }}" class="card-img-top border-bottom" alt="{{ project.title }}">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ project.title }}</h5>
              <p class="card-text">Tech_stack: {{ project.tech_stack }}</p>
              <a href="{{ project.visit_link }}" target="_blank" class="btn btn-outline-light mt-auto">Visit Project</a>
              <a class="nav-link" href="{% url 'project_detail' project.id %}">More Detailed</a>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
{% endfor %}

<!-- Other Projects (less than 3 per category) -->
{% if other_projects %}
  <div class="skills-section mt-5">
    <h3 class="mt-4">Other Projects</h3>
    <div class="mt-3" id="projectss-row">
      <div class="scroll-content">
        {% for project in other_projects %}
          <div class="card bg-dark text-white h-100 card-hover">
            <img src="{{ project.image_url }}" class="card-img-top border-bottom" alt="{{ project.title }}">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ project.title }}</h5>
              <p class="card-text">Tech_stack: {{ project.tech_stack }}</p>
              <a href="{{ project.visit_link }}" target="_blank" class="btn btn-outline-light mt-auto">Visit Project</a>
              <a class="nav-link" href="{% url 'project_detail' project.id %}">More Detailed</a>
            </div>
          </div>
        {% endfor %}

        <!-- Duplicate for seamless scroll -->
        {% for project in other_projects %}
          <div class="card bg-dark text-white h-100 card-hover">
            <img src="{{ project.image_url }}" class="card-img-top border-bottom" alt="{{ project.title }}">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ project.title }}</h5>
              <p class="card-text">Tech_stack: {{ project.tech_stack }}</p>
              <a href="{{ project.visit_link }}" target="_blank" class="btn btn-outline-light mt-auto">Visit Project</a>
              <a class="nav-link" href="{% url 'project_detail' project.id %}">More Detailed</a>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
{% endif %}

{% endblock %}
